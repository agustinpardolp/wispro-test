{"ast":null,"code":"var _jsxFileName = \"/Users/agustinpardo/Desktop/challenge-wispro/client/src/views/Users/index.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState, useContext, useCallback } from \"react\";\nimport { connect } from \"react-redux\";\nimport PropTypes from \"prop-types\";\nimport { useIntl } from \"react-intl\";\nimport Table from \"../../components/Table\";\nimport { fetchUsers, deleteUser, updateUser } from \"../../store/actions/usersActions\";\nimport { StyledUserContainer, StyledDataWrapper } from \"./styled-components\";\nimport { resetOptionHandler, MODAL_TYPE, columnHandler } from \"./constants\";\nimport Submenu from \"./components/Submenu\";\nimport AccessInfo from \"./screens/AccessInfo\";\nimport { ModalContext } from \"../../context/ModalContext\";\nimport EditUser from \"./screens/EditUser\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport const Users = ({\n  fetchUsers,\n  userList,\n  deleteUser,\n  updateUser\n}) => {\n  _s();\n\n  const [filteredList, setFilteredList] = useState([]);\n  const [dataTable, setDataTable] = useState(userList);\n  const [option, setOption] = useState(\"\");\n  let {\n    dispatch\n  } = useContext(ModalContext);\n  const intl = useIntl();\n  useEffect(() => {\n    fetchUsers();\n  }, [dataTable, fetchUsers]);\n  const handleSelectOption = useCallback(e => {\n    if (e.target.value === resetOptionHandler(intl)[0].accessor || e.target.value === intl.formatMessage({\n      id: \"userFilter.select\"\n    })) {\n      clearFilters();\n    } else {\n      setOption(e.target.value);\n      let optionList = userList && userList.map((user, i) => {\n        return {\n          Header: user[e.target.value],\n          id: i\n        };\n      });\n      setFilteredList(optionList);\n    }\n  }, [userList]);\n\n  const clearFilters = () => {\n    setFilteredList([]);\n    setDataTable([]);\n    setOption(\"\");\n  };\n\n  const handleSelectFilter = useCallback(e => {\n    let data = userList.filter(user => user[option] === e.target.value);\n    setDataTable(data);\n  }, [option, userList]);\n\n  const handleDelete = data => {\n    dispatch({\n      type: \"show\",\n      modalType: MODAL_TYPE.DELETE,\n      modalProps: {\n        title: \"userModalDelete.title\",\n        message: \"userModalDelete.subtitle\",\n        open: true,\n        handleAsyncConfirm: deleteUser,\n        handleConfirm: () => dispatch({\n          type: \"hide\"\n        }),\n        posResponse: fetchUsers,\n        data: data.dni\n      }\n    });\n  };\n\n  const handleEdit = data => {\n    dispatch({\n      type: \"show\",\n      modalType: MODAL_TYPE.EDIT,\n      modalProps: {\n        title: \"userModalEdit.title\",\n        message: \"userModalEdit.subtitle\",\n        open: true,\n        size: \"lg\",\n        children: /*#__PURE__*/_jsxDEV(EditUser, {\n          data: data,\n          handleAsyncConfirm: updateUser,\n          posResponse: fetchUsers,\n          onClose: dispatch\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 11\n        }, this)\n      }\n    });\n  };\n\n  const handleAccessInfo = data => {\n    dispatch({\n      type: \"show\",\n      modalType: MODAL_TYPE.INFO,\n      modalProps: {\n        title: \"barChart.title\",\n        message: \"barChart.subtitle\",\n        open: true,\n        data: data,\n        size: \"lg\",\n        children: /*#__PURE__*/_jsxDEV(AccessInfo, {\n          data: data\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 19\n        }, this)\n      }\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(StyledUserContainer, {\n      children: [/*#__PURE__*/_jsxDEV(Submenu, {\n        filteredList: filteredList,\n        handleSelectOption: handleSelectOption,\n        handleSelectFilter: handleSelectFilter,\n        intl: intl\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(StyledDataWrapper, {\n        children: /*#__PURE__*/_jsxDEV(Table, {\n          columns: columnHandler(intl),\n          data: dataTable.length ? dataTable : userList,\n          callBackDelete: handleDelete,\n          callBackEdit: handleEdit,\n          callBack: handleAccessInfo\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n};\n\n_s(Users, \"I6BGwMvndTbt3MkqvpANx6F/Fvw=\", false, function () {\n  return [useIntl];\n});\n\n_c = Users;\nexport const mapStateToProps = state => {\n  const {\n    users: {\n      data: userList,\n      status\n    }\n  } = state;\n  return {\n    userList,\n    status\n  };\n};\nexport const mapDispatchToProps = {\n  fetchUsers,\n  deleteUser,\n  updateUser\n};\nUsers.propTypes = {\n  fetchUsers: PropTypes.func,\n  deleteUser: PropTypes.func,\n  updateUser: PropTypes.func\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(Users);\n\nvar _c;\n\n$RefreshReg$(_c, \"Users\");","map":{"version":3,"sources":["/Users/agustinpardo/Desktop/challenge-wispro/client/src/views/Users/index.jsx"],"names":["React","useEffect","useState","useContext","useCallback","connect","PropTypes","useIntl","Table","fetchUsers","deleteUser","updateUser","StyledUserContainer","StyledDataWrapper","resetOptionHandler","MODAL_TYPE","columnHandler","Submenu","AccessInfo","ModalContext","EditUser","Users","userList","filteredList","setFilteredList","dataTable","setDataTable","option","setOption","dispatch","intl","handleSelectOption","e","target","value","accessor","formatMessage","id","clearFilters","optionList","map","user","i","Header","handleSelectFilter","data","filter","handleDelete","type","modalType","DELETE","modalProps","title","message","open","handleAsyncConfirm","handleConfirm","posResponse","dni","handleEdit","EDIT","size","children","handleAccessInfo","INFO","length","mapStateToProps","state","users","status","mapDispatchToProps","propTypes","func"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, useContext, useCallback } from \"react\";\nimport { connect } from \"react-redux\";\nimport PropTypes from \"prop-types\";\nimport { useIntl } from \"react-intl\";\nimport Table from \"../../components/Table\";\nimport {\n  fetchUsers,\n  deleteUser,\n  updateUser,\n} from \"../../store/actions/usersActions\";\nimport { StyledUserContainer, StyledDataWrapper } from \"./styled-components\";\nimport { resetOptionHandler, MODAL_TYPE, columnHandler } from \"./constants\";\nimport Submenu from \"./components/Submenu\";\nimport AccessInfo from \"./screens/AccessInfo\";\nimport { ModalContext } from \"../../context/ModalContext\";\nimport EditUser from \"./screens/EditUser\";\n\nexport const Users = ({ fetchUsers, userList, deleteUser, updateUser }) => {\n  const [filteredList, setFilteredList] = useState([]);\n  const [dataTable, setDataTable] = useState(userList);\n  const [option, setOption] = useState(\"\");\n  let { dispatch } = useContext(ModalContext);\n  const intl = useIntl();\n\n  useEffect(() => {\n    fetchUsers();\n  }, [dataTable, fetchUsers]);\n\n  const handleSelectOption = useCallback(\n    (e) => {\n      if (\n        e.target.value === resetOptionHandler(intl)[0].accessor ||\n        e.target.value === intl.formatMessage({ id: \"userFilter.select\" })\n      ) {\n        clearFilters();\n      } else {\n        setOption(e.target.value);\n        let optionList =\n          userList &&\n          userList.map((user, i) => {\n            return { Header: user[e.target.value], id: i };\n          });\n        setFilteredList(optionList);\n      }\n    },\n    [userList]\n  );\n\n  const clearFilters = () => {\n    setFilteredList([]);\n    setDataTable([]);\n    setOption(\"\");\n  };\n\n  const handleSelectFilter = useCallback(\n    (e) => {\n      let data = userList.filter((user) => user[option] === e.target.value);\n      setDataTable(data);\n    },\n    [option, userList]\n  );\n\n  const handleDelete = (data) => {\n    dispatch({\n      type: \"show\",\n      modalType: MODAL_TYPE.DELETE,\n      modalProps: {\n        title: \"userModalDelete.title\",\n        message: \"userModalDelete.subtitle\",\n        open: true,\n        handleAsyncConfirm: deleteUser,\n        handleConfirm: () => dispatch({ type: \"hide\" }),\n        posResponse: fetchUsers,\n        data: data.dni,\n      },\n    });\n  };\n\n  const handleEdit = (data) => {\n    dispatch({\n      type: \"show\",\n      modalType: MODAL_TYPE.EDIT,\n      modalProps: {\n        title: \"userModalEdit.title\",\n        message: \"userModalEdit.subtitle\",\n        open: true,\n        size: \"lg\",\n        children: (\n          <EditUser\n            data={data}\n            handleAsyncConfirm={updateUser}\n            posResponse={fetchUsers}\n            onClose={dispatch}\n          />\n        ),\n      },\n    });\n  };\n\n  const handleAccessInfo = (data) => {\n    dispatch({\n      type: \"show\",\n      modalType: MODAL_TYPE.INFO,\n      modalProps: {\n        title: \"barChart.title\",\n        message: \"barChart.subtitle\",\n        open: true,\n        data: data,\n        size: \"lg\",\n        children: <AccessInfo data={data} />,\n      },\n    });\n  };\n\n  return (\n    <>\n      <StyledUserContainer>\n        <Submenu\n          filteredList={filteredList}\n          handleSelectOption={handleSelectOption}\n          handleSelectFilter={handleSelectFilter}\n          intl={intl}\n        />\n        <StyledDataWrapper>\n          <Table\n            columns={columnHandler(intl)}\n            data={dataTable.length ? dataTable : userList}\n            callBackDelete={handleDelete}\n            callBackEdit={handleEdit}\n            callBack={handleAccessInfo}\n          />\n        </StyledDataWrapper>\n      </StyledUserContainer>\n    </>\n  );\n};\n\nexport const mapStateToProps = (state) => {\n  const {\n    users: { data: userList, status },\n  } = state;\n  return {\n    userList,\n    status,\n  };\n};\n\nexport const mapDispatchToProps = {\n  fetchUsers,\n  deleteUser,\n  updateUser,\n};\n\nUsers.propTypes = {\n  fetchUsers: PropTypes.func,\n  deleteUser: PropTypes.func,\n  updateUser: PropTypes.func,\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Users);\n"]},"metadata":{},"sourceType":"module"}